{"remainingRequest":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/desmondchew/data-processing/src/components/PhoneNumberFormatter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/desmondchew/data-processing/src/components/PhoneNumberFormatter.vue","mtime":1636091558805},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1636003761116},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1636003761114},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1636003761256},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1636003761308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGhvbmVOdW1iZXJGb3JtYXR0ZXIiLAogIHByb3BzOiB7CiAgICBtc2c6IFN0cmluZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkcm9wRmlsZXM6IFtdLAogICAgICBqc29uRGF0YToge30sCiAgICAgIHByb2Nlc3NlZERhdGE6IFtdLAogICAgICBzdGF0dXM6ICcnLAogICAgICBzaG93UHJvZ3Jlc3M6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaXNOdW1iZXIocGFyYW0pewogICAgICByZXR1cm4gL15cZCskLy50ZXN0KHBhcmFtKTsKICAgIH0sCiAgICBkZWxldGVEcm9wRmlsZSgpIHsKICAgICAgLy90aGlzLmRyb3BGaWxlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmRyb3BGaWxlcyA9IFtdOwogICAgICB0aGlzLnN0YXR1cyA9ICdpbml0aWFsJwogICAgfSwKICAgIHRvSnNvbigpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewoKICAgICAgICAgIC8vR2V0IHRoZSB1cGxvYWRlZCBmaWxlLCBhenVyZVVwbG9hZGVyIGlzIHRoZSByZWZlcmVuY2UgaGVyZSwgUVVwbG9hZGVyIGlzIHRoZSByZWZlcmVuY2Ugd2l0aGluIG91ciBiaXQgY29tcG9uZW50LgogICAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmRyb3BGaWxlczsKCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJGSUxFIiwgZmlsZSk7CgogICAgICAgICAgbGV0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBsZXQgY3N2ID0gZS50YXJnZXQucmVzdWx0OwoKICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjc3YpOwoKICAgICAgICAgICAgdmFyIGxpbmVzID0gY3N2LnNwbGl0KCJcclxuIik7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coImxpbmVzICIsIGxpbmVzKTsKCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgICAgICAgIC8vdmFyIGhlYWRlcnMgPSBsaW5lc1swXS5zcGxpdCgiLCIpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJoZWFkZXJzICIsIGhlYWRlcnMpOwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICAgICAgICB2YXIgY3VycmVudGxpbmUgPSBsaW5lc1tpXTsKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJsaW5lICIsIGksICIgIiwgY3VycmVudGxpbmUpOwoKICAgICAgICAgICAgICBvYmogPSBjdXJyZW50bGluZTsKCiAgICAgICAgICAgICAgaWYgKG9iaiAhPT0gbnVsbCAmJiBvYmogIT09ICIiICYmIG9iaiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChvYmopOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygicmVzdWx0ICIsIHJlc3VsdCk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIkpTT04gc3RyIiwgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIkRhdGEgIiwgdGhpcy5kYXRhKTsKCiAgICAgICAgICAgIHJlc29sdmUoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7CiAgICAgICAgICB9OwogICAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZSk7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHN0YXJ0UHJvY2Vzc2luZygpIHsKCiAgICAgIHRoaXMuc2hvd1Byb2dyZXNzID0gdHJ1ZTsKCiAgICAgIHZhciBzdHJKc29uID0gYXdhaXQgdGhpcy50b0pzb24oKTsKICAgICAgdmFyIEFyciA9IEpTT04ucGFyc2Uoc3RySnNvbik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEFyci5sZW5ndGg7IGkrKykgewoKICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoQXJyW2ldKSA9PSAie30iKXsKICAgICAgICAgIEFycltpXSA9ICJudWxsIgogICAgICAgIH1lbHNlewoKICAgICAgICAgIEFycltpXSA9IEFycltpXS5yZXBsYWNlKCIrIiwgIiIpLnJlcGxhY2UoIi0iLCAiIikuc3BsaXQoJyAnKS5qb2luKCcnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0IGlzTnVtYmVyJywgdGhpcy5pc051bWJlcihBcnJbMF0pKTsKCiAgICAgICAgICBpZiAoQXJyW2ldLmNoYXJBdCgwKSA9PT0gIjEiICYmIHRoaXMuaXNOdW1iZXIoQXJyW2ldKSApIHsKICAgICAgICAgICAgbGV0IGZyb250MSA9ICI2MCI7CiAgICAgICAgICAgIEFycltpXSA9IGZyb250MS5jb25jYXQoQXJyW2ldKTsKCiAgICAgICAgICB9IGVsc2UgaWYgKEFycltpXS5jaGFyQXQoMCkgPT09ICIwIiAmJiB0aGlzLmlzTnVtYmVyKEFycltpXSkpIHsKICAgICAgICAgICAgbGV0IGZyb250MiA9ICI2IjsKICAgICAgICAgICAgQXJyW2ldID0gZnJvbnQyLmNvbmNhdChBcnJbaV0pOwoKICAgICAgICAgIH0gZWxzZSBpZiAoQXJyW2ldLmNoYXJBdCgwKSA9PT0gIjYiICYmIHRoaXMuaXNOdW1iZXIoQXJyW2ldKSkgewogICAgICAgICAgICAvLyBPSwogICAgICAgICAgICAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCBiYWNrID0gIiBbRXJyb3JdIgogICAgICAgICAgICBBcnJbaV0gPSBBcnJbaV0uY29uY2F0KGJhY2spOwogICAgICAgICAgICAvLyBXYXJuaW5nCiAgICAgICAgICAgIC8vIGhvdyBhYm91dCBsYW5kbGluZSBudW1iZXI/CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zb2xlLmxvZygiVXBsb2FkZWQgRGF0YSIsIEFycik7CiAgICAgIHRoaXMucHJvY2Vzc2VkRGF0YSA9IEFycjsKICAgICAgY29uc29sZS5sb2coIlByb2Nlc3NlZCBEYXRhIiwgdGhpcy5wcm9jZXNzZWREYXRhKTsKCiAgICAgIHRoaXMuc2hvd1Byb2dyZXNzID0gZmFsc2U7CiAgICAgIHRoaXMuc3RhdHVzID0gJ3Byb2Nlc3NlZCc7CgogICAgfSwKICAgIGRvd25sb2FkQ3N2KCl7CiAgICAgIC8vdmFyIGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnByb2Nlc3NlZERhdGEpOwogICAgICAvLyB2YXIgZmllbGRzID0gT2JqZWN0LmtleXMoanNvblswXSkKICAgICAgLy8gdmFyIHJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IG51bGwgPyAnJyA6IHZhbHVlIH0gCiAgICAgIC8vIHZhciBjc3YgPSBqc29uLm1hcChmdW5jdGlvbihyb3cpewogICAgICAvLyAgIHJldHVybiBmaWVsZHMubWFwKGZ1bmN0aW9uKGZpZWxkTmFtZSl7CiAgICAgIC8vICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm93W2ZpZWxkTmFtZV0sIHJlcGxhY2VyKQogICAgICAvLyAgIH0pLmpvaW4oJywnKQogICAgICAvLyB9KQogICAgICAvLyBjc3YudW5zaGlmdChmaWVsZHMuam9pbignLCcpKSAvLyBhZGQgaGVhZGVyIGNvbHVtbgogICAgICAvLyBjc3YgPSBjc3Yuam9pbignXHJcbicpOwogICAgICB2YXIgY29udGVudCA9IHRoaXMucHJvY2Vzc2VkRGF0YS5qb2luKCcsIFxyXG4nKTsKICAgICAgLy9jb25zb2xlLmxvZygganNvblN0cmluZy5yZXBsYWNlKCdbJywnJykucmVwbGFjZSgnXScsJycpICk7CgogICAgICAvL3ZhciBkYXRhID0ganNvblN0cmluZy5yZXBsYWNlKCdbJywnJykucmVwbGFjZSgnXScsJycpOwoKICAgICAgbGV0IGNzdkNvbnRlbnQgPSAiZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LCIgKyBjb250ZW50OwogICAgICB2YXIgZW5jb2RlZFVyaSA9IGVuY29kZVVSSShjc3ZDb250ZW50KTsKICAgICAgd2luZG93Lm9wZW4oZW5jb2RlZFVyaSk7CgogICAgfSwKICAgIHJlc2V0KCl7CiAgICAgIHRoaXMuZHJvcEZpbGVzID0gW107CiAgICAgIHRoaXMuc3RhdHVzID0gJ2luaXRpYWwnCiAgICB9CgogIH0sCn07Cg=="},{"version":3,"sources":["PhoneNumberFormatter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"PhoneNumberFormatter.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <!-- <div class=\"hello\">\n    <h1>{{ msg }}</h1>\n  </div> -->\n  <section class=\"container\">\n    <h1 class=\"mb-5 has-text-weight-bold d-poppins\">Phone Number Formatter</h1>\n    <b-field v-if=\"this.dropFiles.length === 0\" class=\"m-4\">\n      <b-upload v-model=\"dropFiles\" drag-drop type=\"is-primary\">\n        <section class=\"section\">\n          <div class=\"content has-text-centered\">\n            <p>\n              <b-icon icon=\"upload\" size=\"is-large\"> </b-icon>\n            </p>\n            <p class=\"d-poppins\">Drop your files here or click to upload</p>\n          </div>\n        </section>\n      </b-upload>\n    </b-field>\n\n<b-field v-if=\"this.dropFiles.length !== 0\" class=\"m-4\"> \n  <div class=\"upload control\">\n    <div class=\"upload-draggable is-primary\">\n      <section class=\"section\">\n    <div class=\"tags\" style=\"border-radius: 1rem; justify-content: center; margin-bottom: 0rem !important; min-width: 268px; height: 88px\" v-if=\"this.dropFiles.length !== 0\">\n      <!-- <div class=\"d-poppins mr-3\">File Uploaded</div> -->\n      <span\n        style=\"padding: 1rem; border-radius: 0.5rem; border: 1px solid #cccccc;\"\n        class=\"tag is-grey d-poppins\"\n      >\n        {{ dropFiles.name }}\n        <button\n          class=\"delete is-small\"\n          type=\"button\"\n          @click=\"deleteDropFile()\"\n        ></button>\n        \n      </span>\n      <span v-if=\"status == 'processed'\">\n        <b-tag type=\"is-primary is-light d-poppins\" style=\"border-radius: 0.5rem; border: 1px solid #177d44; height: 32px;\">Completed</b-tag>\n      </span>\n      \n    </div>\n    </section>\n    </div>\n    \n    </div>\n    </b-field>\n    \n\n    <b-button\n      type=\"is-primary\"\n      class=\"d-poppins\"\n      @click=\"startProcessing\"\n      :disabled=\"this.dropFiles.length == 0 ? true : false\"\n      v-if=\"status != 'processed'\"\n    >\n      Start Processing\n    </b-button>\n\n    <b-button\n      type=\"is-primary\"\n      class=\"d-poppins\"\n      @click=\"downloadCsv\"\n      v-if=\"status == 'processed'\"\n    >\n      Download\n    </b-button>\n\n    <b-button\n      type=\"is-grey ml-3\"\n      class=\"d-poppins\"\n      @click=\"reset\"\n      v-if=\"this.dropFiles.length !== 0\"\n    >\n      Reset\n      </b-button>\n\n      <div class=\"mt-5 mx-4\" v-if=\"showProgress\">\n        <b-progress></b-progress>\n      </div>\n\n  </section>\n</template>\n\n<script>\nexport default {\n  name: \"PhoneNumberFormatter\",\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      dropFiles: [],\n      jsonData: {},\n      processedData: [],\n      status: '',\n      showProgress: false\n    };\n  },\n  methods: {\n    isNumber(param){\n      return /^\\d+$/.test(param);\n    },\n    deleteDropFile() {\n      //this.dropFiles.splice(index, 1);\n      this.dropFiles = [];\n      this.status = 'initial'\n    },\n    toJson() {\n      return new Promise((resolve, reject) => {\n        try {\n\n          //Get the uploaded file, azureUploader is the reference here, QUploader is the reference within our bit component.\n          let file = this.dropFiles;\n\n          //console.log(\"FILE\", file);\n\n          let fileReader = new FileReader();\n          fileReader.onload = function (e) {\n            let csv = e.target.result;\n\n            //console.log(csv);\n\n            var lines = csv.split(\"\\r\\n\");\n            //console.log(\"lines \", lines);\n\n            var result = [];\n\n            //var headers = lines[0].split(\",\");\n            //console.log(\"headers \", headers);\n\n            for (var i = 0; i < lines.length; i++) {\n              var obj = {};\n              var currentline = lines[i];\n              //console.log(\"line \", i, \" \", currentline);\n\n              obj = currentline;\n\n              if (obj !== null && obj !== \"\" && obj !== undefined) {\n                result.push(obj);\n              }\n            }\n\n            //console.log(\"result \", result);\n            //console.log(\"JSON str\", JSON.stringify(result));\n            //console.log(\"Data \", this.data);\n\n            resolve(JSON.stringify(result));\n          };\n          fileReader.readAsBinaryString(file);\n        } catch (err) {\n          reject(err);\n        }\n      });\n    },\n    async startProcessing() {\n\n      this.showProgress = true;\n\n      var strJson = await this.toJson();\n      var Arr = JSON.parse(strJson);\n\n      for (let i = 0; i < Arr.length; i++) {\n\n        if (JSON.stringify(Arr[i]) == \"{}\"){\n          Arr[i] = \"null\"\n        }else{\n\n          Arr[i] = Arr[i].replace(\"+\", \"\").replace(\"-\", \"\").split(' ').join('');\n          console.log('test isNumber', this.isNumber(Arr[0]));\n\n          if (Arr[i].charAt(0) === \"1\" && this.isNumber(Arr[i]) ) {\n            let front1 = \"60\";\n            Arr[i] = front1.concat(Arr[i]);\n\n          } else if (Arr[i].charAt(0) === \"0\" && this.isNumber(Arr[i])) {\n            let front2 = \"6\";\n            Arr[i] = front2.concat(Arr[i]);\n\n          } else if (Arr[i].charAt(0) === \"6\" && this.isNumber(Arr[i])) {\n            // OK\n            \n          } else {\n            let back = \" [Error]\"\n            Arr[i] = Arr[i].concat(back);\n            // Warning\n            // how about landline number?\n          }\n        }\n      }\n\n      console.log(\"Uploaded Data\", Arr);\n      this.processedData = Arr;\n      console.log(\"Processed Data\", this.processedData);\n\n      this.showProgress = false;\n      this.status = 'processed';\n\n    },\n    downloadCsv(){\n      //var jsonString = JSON.stringify(this.processedData);\n      // var fields = Object.keys(json[0])\n      // var replacer = function(key, value) { return value === null ? '' : value } \n      // var csv = json.map(function(row){\n      //   return fields.map(function(fieldName){\n      //     return JSON.stringify(row[fieldName], replacer)\n      //   }).join(',')\n      // })\n      // csv.unshift(fields.join(',')) // add header column\n      // csv = csv.join('\\r\\n');\n      var content = this.processedData.join(', \\r\\n');\n      //console.log( jsonString.replace('[','').replace(']','') );\n\n      //var data = jsonString.replace('[','').replace(']','');\n\n      let csvContent = \"data:text/csv;charset=utf-8,\" + content;\n      var encodedUri = encodeURI(csvContent);\n      window.open(encodedUri);\n\n    },\n    reset(){\n      this.dropFiles = [];\n      this.status = 'initial'\n    }\n\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.upload-draggable{\n  border-radius: 1rem !important;\n}\n</style>\n"]}]}