{"remainingRequest":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/desmondchew/data-processing/src/components/PhoneNumberFormatter.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/desmondchew/data-processing/src/components/PhoneNumberFormatter.vue","mtime":1636003359018},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1635926693078},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1635926693502},{"path":"/Users/desmondchew/data-processing/node_modules/postcss-loader/src/index.js","mtime":1635926693212},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1635926692891},{"path":"/Users/desmondchew/data-processing/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1635926693325}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnVwbG9hZC1kcmFnZ2FibGV7CiAgYm9yZGVyLXJhZGl1czogMXJlbSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["PhoneNumberFormatter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4PA;AACA;AACA","file":"PhoneNumberFormatter.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <!-- <div class=\"hello\">\n    <h1>{{ msg }}</h1>\n  </div> -->\n  <section class=\"container\">\n    <h1 class=\"mb-5 has-text-weight-bold d-poppins\">Phone Number Formatter</h1>\n    <b-field v-if=\"this.dropFiles.length === 0\" class=\"m-4\">\n      <b-upload v-model=\"dropFiles\" drag-drop type=\"is-primary\">\n        <section class=\"section\">\n          <div class=\"content has-text-centered\">\n            <p>\n              <b-icon icon=\"upload\" size=\"is-large\"> </b-icon>\n            </p>\n            <p class=\"d-poppins\">Drop your files here or click to upload</p>\n          </div>\n        </section>\n      </b-upload>\n    </b-field>\n\n<b-field v-if=\"this.dropFiles.length !== 0\" class=\"m-4\"> \n  <div class=\"upload control\">\n    <div class=\"upload-draggable is-primary\">\n      <section class=\"section\">\n    <div class=\"tags\" style=\"border-radius: 1rem; justify-content: center; margin-bottom: 0rem !important; min-width: 268px; height: 88px\" v-if=\"this.dropFiles.length !== 0\">\n      <!-- <div class=\"d-poppins mr-3\">File Uploaded</div> -->\n      <span\n        style=\"padding: 1rem; border-radius: 0.5rem; border: 1px solid #cccccc;\"\n        class=\"tag is-grey d-poppins\"\n      >\n        {{ dropFiles.name }}\n        <button\n          class=\"delete is-small\"\n          type=\"button\"\n          @click=\"deleteDropFile()\"\n        ></button>\n        \n      </span>\n      <span v-if=\"status == 'processed'\">\n        <b-tag type=\"is-primary is-light d-poppins\" style=\"border-radius: 0.5rem; border: 1px solid #177d44; height: 32px;\">Completed</b-tag>\n      </span>\n      \n    </div>\n    </section>\n    </div>\n    \n    </div>\n    </b-field>\n    \n\n    <b-button\n      type=\"is-primary\"\n      class=\"d-poppins\"\n      @click=\"startProcessing\"\n      :disabled=\"this.dropFiles.length == 0 ? true : false\"\n      v-if=\"status != 'processed'\"\n    >\n      Start Processing\n    </b-button>\n\n    <b-button\n      type=\"is-primary\"\n      class=\"d-poppins\"\n      @click=\"downloadCsv\"\n      v-if=\"status == 'processed'\"\n    >\n      Download\n    </b-button>\n\n    <b-button\n      type=\"is-grey ml-3\"\n      class=\"d-poppins\"\n      @click=\"reset\"\n      v-if=\"this.dropFiles.length !== 0\"\n    >\n      Reset\n      </b-button>\n\n      <div class=\"mt-5\" v-if=\"showProgress\">\n        <b-progress></b-progress>\n      </div>\n\n  </section>\n</template>\n\n<script>\nexport default {\n  name: \"PhoneNumberFormatter\",\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      dropFiles: [],\n      jsonData: {},\n      processedData: [],\n      status: '',\n      showProgress: false\n    };\n  },\n  methods: {\n    deleteDropFile() {\n      //this.dropFiles.splice(index, 1);\n      this.dropFiles = [];\n      this.status = 'initial'\n    },\n    toJson() {\n      return new Promise((resolve, reject) => {\n        try {\n          // let filename = this.$refs.azureUploader.files[0].name;\n          // let file = this.$refs.azureUploader.files\n          //   .filter((v) => v.name === filename)\n          //   .reduce((init, v) => v, []);\n\n          //Get the uploaded file, azureUploader is the reference here, QUploader is the reference within our bit component.\n          let file = this.dropFiles;\n\n          //console.log(\"FILE\", file);\n\n          let fileReader = new FileReader();\n          fileReader.onload = function (e) {\n            let csv = e.target.result;\n\n            //console.log(csv);\n\n            var lines = csv.split(\"\\r\\n\");\n            //console.log(\"lines \", lines);\n\n            var result = [];\n\n            var headers = lines[0].split(\",\");\n            //console.log(\"headers \", headers);\n\n            for (var i = 1; i < lines.length - 1; i++) {\n              var obj = {};\n              var currentline = lines[i].split(\",\");\n              //console.log(\"line \", i, \" \", currentline);\n\n              if (\n                currentline !== null &&\n                currentline !== \"\" &&\n                currentline !== undefined\n              ) {\n                for (var j = 0; j < headers.length; j++) {\n                  if (\n                    currentline[j] !== null &&\n                    currentline[j] !== \"\" &&\n                    currentline[j] !== undefined &&\n                    headers[j] !== null &&\n                    headers[j] !== \"\" &&\n                    headers[j] !== undefined\n                  ) {\n                    //console.log(\"headerJ \", headers[j], currentline[j]);\n\n                    obj = currentline[j];\n                    //console.log(\"obj in \", obj);\n                  }\n                }\n\n                //console.log(\"obj \", obj);\n                if (obj !== null && obj !== \"\" && obj !== undefined) {\n                  result.push(obj);\n                }\n              }\n            }\n\n            //console.log(\"result \", result);\n            //console.log(\"JSON str\", JSON.stringify(result));\n            //console.log(\"Data \", this.data);\n\n            resolve(JSON.stringify(result));\n          };\n          fileReader.readAsBinaryString(file);\n        } catch (err) {\n          reject(err);\n        }\n      });\n    },\n    async startProcessing() {\n\n      this.showProgress = true;\n\n      var strJson = await this.toJson();\n      var Arr = JSON.parse(strJson);\n\n      //\n      // var Arr = parsedArr.filter(function (item) {\n      //   return JSON.stringify(item) !== \"{}\";\n      // });\n\n      for (let i = 0; i < Arr.length; i++) {\n\n        if (JSON.stringify(Arr[i]) == \"{}\"){\n          Arr[i] = \"null\"\n        }else{\n\n          Arr[i] = Arr[i].replace(\"+\", \"\").replace(\"-\", \"\").split(' ').join('');\n\n          if (Arr[i].charAt(0) === \"1\") {\n            let front1 = \"60\";\n            Arr[i] = front1.concat(Arr[i]);\n          } else if (Arr[i].charAt(0) === \"0\") {\n            let front2 = \"6\";\n            Arr[i] = front2.concat(Arr[i]);\n          } else if (Arr[i].charAt(0) === \"6\") {\n            // OK\n          } else {\n            // Do something, alert, insert key? such as 'Caution'\n            // how about landline number?\n          }\n        }\n      }\n\n      console.log(\"Uploaded Data\", Arr);\n      this.processedData = Arr;\n      console.log(\"Processed Data\", this.processedData);\n\n      this.showProgress = false;\n      this.status = 'processed';\n\n    },\n    downloadCsv(){\n      //var jsonString = JSON.stringify(this.processedData);\n      // var fields = Object.keys(json[0])\n      // var replacer = function(key, value) { return value === null ? '' : value } \n      // var csv = json.map(function(row){\n      //   return fields.map(function(fieldName){\n      //     return JSON.stringify(row[fieldName], replacer)\n      //   }).join(',')\n      // })\n      // csv.unshift(fields.join(',')) // add header column\n      // csv = csv.join('\\r\\n');\n      var content = this.processedData.join(', \\r\\n');\n      //console.log( jsonString.replace('[','').replace(']','') );\n\n      //var data = jsonString.replace('[','').replace(']','');\n\n      let csvContent = \"data:text/csv;charset=utf-8,\" + content;\n      var encodedUri = encodeURI(csvContent);\n      window.open(encodedUri);\n\n    },\n    reset(){\n      this.dropFiles = [];\n      this.status = 'initial'\n    }\n\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.upload-draggable{\n  border-radius: 1rem !important;\n}\n</style>\n"]}]}